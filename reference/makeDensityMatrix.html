<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compute a matrix of counts from a list of x,y positions — makeDensityMatrix • plotrix</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compute a matrix of counts from a list of x,y positions — makeDensityMatrix"><meta name="description" content="Compute a matrix in which the counts in each cell represent the number of
 occurrences of that cell's coordinates in a list of x,y cooordinate values,
 optionally computing a second matrix of the average of the values attached
 to the coordinate observations."><meta property="og:description" content="Compute a matrix in which the counts in each cell represent the number of
 occurrences of that cell's coordinates in a list of x,y cooordinate values,
 optionally computing a second matrix of the average of the values attached
 to the coordinate observations."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">plotrix</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.8-9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/plotrix/plotrix/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Compute a matrix of counts from a list of x,y positions</h1>

      <div class="d-none name"><code>makeDensityMatrix.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Compute a matrix in which the counts in each cell represent the number of
 occurrences of that cell's coordinates in a list of x,y cooordinate values,
 optionally computing a second matrix of the average of the values attached
 to the coordinate observations.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">makeDensityMatrix</span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span>,z<span class="op">=</span><span class="cn">NULL</span>,nx<span class="op">=</span><span class="fl">100</span>,ny<span class="op">=</span><span class="fl">50</span>,zfun<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean"</span>,<span class="st">"sum"</span><span class="op">)</span>,</span>
<span> xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">180</span>,<span class="fl">180</span><span class="op">)</span>,ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">90</span>,<span class="fl">90</span><span class="op">)</span>,geocoord<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <p></p>
<dl><dt id="arg-x-y">x,y<a class="anchor" aria-label="anchor" href="#arg-x-y"></a></dt>
<dd><p>Vectors of x and y coordinates. These are usually combined in a
  matrix or data frame of two columns.</p></dd>

 <dt id="arg-z">z<a class="anchor" aria-label="anchor" href="#arg-z"></a></dt>
<dd><p>Optional values attached to each coordinate pair. If these are present,
  it can be in a matrix or data frame of three columns, x, y and z.</p></dd>

 <dt id="arg-nx">nx<a class="anchor" aria-label="anchor" href="#arg-nx"></a></dt>
<dd><p>The number of "x" cells in the output matrix.</p></dd>

 <dt id="arg-ny">ny<a class="anchor" aria-label="anchor" href="#arg-ny"></a></dt>
<dd><p>The number of "y" cells in the output matrix.</p></dd>

 <dt id="arg-zfun">zfun<a class="anchor" aria-label="anchor" href="#arg-zfun"></a></dt>
<dd><p>The function to apply to the summed values attached to each
  coordinate pair. Currently defaults to mean, otherwise the sum is returned.</p></dd>

 <dt id="arg-xlim">xlim<a class="anchor" aria-label="anchor" href="#arg-xlim"></a></dt>
<dd><p>The extreme coordinates in the horizontal direction (see Details).</p></dd>

 <dt id="arg-ylim">ylim<a class="anchor" aria-label="anchor" href="#arg-ylim"></a></dt>
<dd><p>The extreme coordinates in the vertical direction (see Details).</p></dd>

 <dt id="arg-geocoord">geocoord<a class="anchor" aria-label="anchor" href="#arg-geocoord"></a></dt>
<dd><p>Whether to correct the matrix values for the areal distortion
  of the Mercator projection.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><samp>makeDensityMatrix</samp> expects two vectors or a matrix or data frame with
 at least two columns. The function was written for geographic coordinates,
 but will also work for other numeric coordinates. An optional third vector
 or column of values for each coordinate will be processed.</p>
<p>Each coordinate pair adds to the count in that cell of the matrix. If there
 is a third element, that value is added to a second matrix in the same
 position. By default, the function computes the mean of all values in each
 cell. If <samp>zfun="sum"</samp>, the sum of values in each cell will be returned.</p>
<p>As geograhic data sets may be very large, leading to memory problems,
 <samp>makeDensityMatrix</samp> can be run on small sections of the data set and the
 resulting matrices added together as long as the coordinate limits are
 consistent throughout.</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Either a matrix of counts of coordinate pairs within each cell or a list of
 two such matrices, the second containing the mean or sum of values associated
 with coordinate pairs.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Jim Lemon</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="densityGrid.html">densityGrid</a></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span> <span class="va">x</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span>,<span class="fl">400</span>,<span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">y</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span>,<span class="fl">400</span>,<span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">z</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">400</span>,<span class="fl">5</span>,<span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">xyz</span><span class="op">&lt;-</span><span class="fu">makeDensityMatrix</span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span>,<span class="va">z</span>,nx<span class="op">=</span><span class="fl">20</span>,ny<span class="op">=</span><span class="fl">20</span>,xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">10</span><span class="op">)</span>,ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  geocoord<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Range of density (&gt;0) - 1 5 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Range of intensity (&gt;0) - 5.111809 19.95792 </span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7</span>,<span class="fl">3</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fl">0</span>,xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">10</span><span class="op">)</span>,ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">10</span><span class="op">)</span>,type<span class="op">=</span><span class="st">"n"</span>,xlab<span class="op">=</span><span class="st">""</span>,axes<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/graphics/box.html" class="external-link">box</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="densityGrid.html">densityGrid</a></span><span class="op">(</span><span class="va">xyz</span>,range.cex<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">4</span><span class="op">)</span>,xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">10</span><span class="op">)</span>,ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  red<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0.5</span>,<span class="fl">0.8</span>,<span class="fl">1</span><span class="op">)</span>,green<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0.8</span>,<span class="fl">0.5</span>,<span class="fl">0</span><span class="op">)</span>,blue<span class="op">=</span><span class="fl">0</span>,pch<span class="op">=</span><span class="fl">15</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="color.legend.html">color.legend</a></span><span class="op">(</span><span class="fl">3</span>,<span class="op">-</span><span class="fl">0.7</span>,<span class="fl">7</span>,<span class="op">-</span><span class="fl">0.2</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">10</span>,<span class="fl">15</span>,<span class="fl">20</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  rect.col<span class="op">=</span><span class="fu"><a href="color.scale.html">color.scale</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>,cs1<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0.5</span>,<span class="fl">0.8</span>,<span class="fl">1</span><span class="op">)</span>,cs2<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0.8</span>,<span class="fl">0.5</span>,<span class="fl">0</span><span class="op">)</span>,cs3<span class="op">=</span><span class="fl">0</span>,alpha<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>xpd<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">0.3</span>,<span class="st">"Intensity"</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3.5</span>,<span class="fl">4.5</span>,<span class="fl">5.5</span>,<span class="fl">6.5</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1.7</span>,<span class="fl">4</span><span class="op">)</span>,pch<span class="op">=</span><span class="fl">15</span>,cex<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3.5</span>,<span class="fl">4.5</span>,<span class="fl">5.5</span>,<span class="fl">6.5</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1.3</span>,<span class="fl">4</span><span class="op">)</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text</a></span><span class="op">(</span><span class="fl">5</span>,<span class="op">-</span><span class="fl">1</span>,<span class="st">"Density"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="makeDensityMatrix-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>xpd<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jim Lemon.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

