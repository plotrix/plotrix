<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Display a data frame in which the values in each successive
 column represent subcategories of the previous column as stacked
 rectangles."><title>Display a hierarchical breakdown of disjunct categories — sizetree • plotrix</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Display a hierarchical breakdown of disjunct categories — sizetree"><meta property="og:description" content="Display a data frame in which the values in each successive
 column represent subcategories of the previous column as stacked
 rectangles."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">plotrix</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.8-6</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/plotrix/plotrix/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Display a hierarchical breakdown of disjunct categories</h1>
      
      <div class="d-none name"><code>sizetree.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Display a data frame in which the values in each successive
 column represent subcategories of the previous column as stacked
 rectangles.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sizetree</span><span class="op">(</span><span class="va">x</span>,left<span class="op">=</span><span class="fl">0</span>,<span class="va">top</span>,right<span class="op">=</span><span class="fl">1</span>,lastcenter<span class="op">=</span><span class="cn">NA</span>,showval<span class="op">=</span><span class="cn">TRUE</span>,showcount<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>  stacklabels<span class="op">=</span><span class="cn">TRUE</span>,firstcall<span class="op">=</span><span class="cn">TRUE</span>,col<span class="op">=</span><span class="cn">NULL</span>,border<span class="op">=</span><span class="cn">NA</span>,toplab<span class="op">=</span><span class="cn">NULL</span>,base.cex<span class="op">=</span><span class="fl">1</span>,</span>
<span>  <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>A data frame in which each successive column represents
  subcategories of the previous column.</p></dd>

 <dt>left</dt>
<dd><p>The left edge of the current stack of rectangles in user units.</p></dd>

 <dt>top</dt>
<dd><p>The top of the current stack of rectangles in user units.</p></dd>

 <dt>right</dt>
<dd><p>The right edge of the current stack of rectangles in user units.</p></dd>

 <dt>lastcenter</dt>
<dd><p>The center of the previous rectangle from which the next
  breakdown of categories arises. There is almost no reason to change it.</p></dd>

 <dt>showval</dt>
<dd><p>Whether to display the values representing the categories.</p></dd>

 <dt>showcount</dt>
<dd><p>Whether to display the count for the categories.</p></dd>

 <dt>stacklabels</dt>
<dd><p>Whether to display the names of the dataframe beneath
  the stacked rectangles.</p></dd>

 <dt>firstcall</dt>
<dd><p>A flag for the function - do not alter this.</p></dd>

 <dt>col</dt>
<dd><p>Optional fill colors for the rectangles. See Details</p></dd>

 <dt>border</dt>
<dd><p>Color for border around the rectangles. See details</p></dd>

 <dt>toplab</dt>
<dd><p>Optional labels to display a the top of each stack.</p></dd>

 <dt>base.cex</dt>
<dd><p>The base character expansion for the labels.</p></dd>

 <dt>...</dt>
<dd><p>additional arguments passed to <samp>plot</samp>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>nil</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><samp>sizetree</samp> displays disjunct hierarchical categories as stacked rectangles.
 It accepts a data frame in which the values in the first column represent
 categories, the values in the second column represent subcategories of the
 first column, and so on. The first column will be displayed as a stack of
 rectangles, the height of each proportional to the count for each category.
 Each substack of rectangles in the second stack will represent the breakdown
 of counts for its superordinate category and so on through the columns.
 Empty categories are ignored and NAs will produce gaps, which will propagate
 across subsequent stacks.</p> 
<p>The user can simply pass the data frame, which should only contain columns that
 are hierarchical categories (example 1). The colors will probably not be ideal.
 The user can pass the same colors for the all levels (example 2). If this is
 done, <samp>sizetree</samp> will try to match colors to categories when
 the number of categories is diminishing (e.g. some levels are missing in the
 sub-categories) and the columns of <samp>x</samp> are factors with the same levels in
 the same order. This will work if the category labels are the same in each level,
 but remember to add the names to the colors before passing them to the function.
 This will not work if there are more categories in the lower levels. If <samp>col</samp>
 is a list, this is not done, and the user will have to work out the correct colors
 for each level. This is particularly important when the category labels and the
 number of categories is different in different levels (example 3).</p>
<p>In some sizetrees, the subcategory counts are very low compared to the overall
 number of data objects. This results in rectangles that are very thin vertically.
 One way to get better legibility of the labels is to use dark colors for the
 rectangles, so that the labels are white, and no borders (set <samp>border</samp> to NA).
 The user can also select only part of the data frame <samp>x</samp> to expand sections
 of the sizetree as in the last example.</p>
<p>The labels are sized to fit the vertical extent of the bars. However, it is
 possible that the labels may extend horizontally beyond the bar(s). The
 <samp>base.cex</samp> argument can be used to shrink the labels if this happens.
 Remember that <samp>base.cex</samp> will shrink all the labels, not just the ones
 that are too wide.</p> 
<p>The <samp>firstcall</samp> argument is necessary for the function to initialize the
 plot, as each breakdown involves a recursive call. If it is changed, the best
 that can be expected is an uninformative plot.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Jim Lemon</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span> <span class="va">cat1</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"None"</span>,<span class="st">"Low"</span>,<span class="st">"Medium"</span>,<span class="st">"High"</span>,<span class="st">"Extreme"</span><span class="op">)</span>,<span class="fl">40</span>,<span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  levels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"None"</span>,<span class="st">"Low"</span>,<span class="st">"Medium"</span>,<span class="st">"High"</span>,<span class="st">"Extreme"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">cat2</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"None"</span>,<span class="st">"Low"</span>,<span class="st">"Medium"</span>,<span class="st">"High"</span><span class="op">)</span>,<span class="fl">40</span>,<span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  levels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"None"</span>,<span class="st">"Low"</span>,<span class="st">"Medium"</span>,<span class="st">"High"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">cat3</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"None"</span>,<span class="st">"Low"</span>,<span class="st">"High"</span><span class="op">)</span>,<span class="fl">40</span>,<span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  levels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"None"</span>,<span class="st">"Low"</span>,<span class="st">"High"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">hcats</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">cat1</span>,<span class="va">cat2</span>,<span class="va">cat3</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="co"># throw in a few NAs</span></span></span>
<span class="r-in"><span> <span class="va">hcats</span><span class="op">$</span><span class="va">cat1</span><span class="op">[</span><span class="fl">10</span><span class="op">]</span><span class="op">&lt;-</span><span class="cn">NA</span></span></span>
<span class="r-in"><span> <span class="va">hcats</span><span class="op">$</span><span class="va">cat2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>,<span class="fl">20</span><span class="op">)</span><span class="op">]</span><span class="op">&lt;-</span><span class="cn">NA</span></span></span>
<span class="r-in"><span> <span class="va">hcats</span><span class="op">$</span><span class="va">cat3</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">11</span>,<span class="fl">14</span>,<span class="fl">25</span><span class="op">)</span><span class="op">]</span><span class="op">&lt;-</span><span class="cn">NA</span></span></span>
<span class="r-in"><span> <span class="co"># first let sizetree work out the colors</span></span></span>
<span class="r-in"><span> <span class="fu">sizetree</span><span class="op">(</span><span class="va">hcats</span>,main<span class="op">=</span><span class="st">"Sizetree with automatic colors"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 NA values dropped from first stack.</span>
<span class="r-plt img"><img src="sizetree-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span> <span class="co"># now see what happens with a list of the same colors for each level</span></span></span>
<span class="r-in"><span> <span class="va">bhcol</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#ff8080"</span>,<span class="st">"#dddd80"</span>,<span class="st">"#80ff80"</span>,<span class="st">"#0000ff"</span>,<span class="st">"#80dddd"</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="fu">sizetree</span><span class="op">(</span><span class="va">hcats</span>,col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">bhcol</span>,<span class="va">bhcol</span>,<span class="va">bhcol</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  main<span class="op">=</span><span class="st">"Sizetree with the same colors each level"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 NA values dropped from first stack.</span>
<span class="r-plt img"><img src="sizetree-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span> <span class="co"># finally, specify different colors for categories with different labels</span></span></span>
<span class="r-in"><span> <span class="va">sexhaireye</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>sex<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Male"</span>,<span class="st">"Female"</span><span class="op">)</span>,<span class="fl">50</span>,<span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  hair<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Blond"</span>,<span class="st">"Red"</span>,<span class="st">"Brown"</span>,<span class="st">"Black"</span><span class="op">)</span>,<span class="fl">50</span>,<span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  eye<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Gold"</span>,<span class="st">"Green"</span>,<span class="st">"Blue"</span><span class="op">)</span>,<span class="fl">50</span>,<span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">shecol</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pink"</span>,<span class="st">"lightblue"</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#000000"</span>,<span class="st">"#dddd00"</span>,<span class="st">"#886600"</span>,<span class="st">"#ee8800"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blue"</span>,<span class="st">"gold"</span>,<span class="st">"green"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="fu">sizetree</span><span class="op">(</span><span class="va">sexhaireye</span>,main<span class="op">=</span><span class="st">"Sex, hair and eye color"</span>,</span></span>
<span class="r-in"><span>  col<span class="op">=</span><span class="va">shecol</span>,toplab<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Sex"</span>,<span class="st">"Hair color"</span>,<span class="st">"Eye color"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="sizetree-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span> <span class="co"># now expand the female part of the sizetree</span></span></span>
<span class="r-in"><span> <span class="fu">sizetree</span><span class="op">(</span><span class="va">sexhaireye</span><span class="op">[</span><span class="va">sexhaireye</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span><span class="op">==</span><span class="st">"Female"</span>,<span class="op">]</span>,</span></span>
<span class="r-in"><span>  main<span class="op">=</span><span class="st">"Sex, hair and eye color (Females only)"</span>,</span></span>
<span class="r-in"><span>  col<span class="op">=</span><span class="va">shecol</span>,toplab<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Sex"</span>,<span class="st">"Hair color"</span>,<span class="st">"Eye color"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="sizetree-4.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Jim Lemon.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

